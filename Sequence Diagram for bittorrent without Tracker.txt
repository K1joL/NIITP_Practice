@startuml
participant Отправитель as S
participant Получатель as R1
participant "Получатель 2" as R2


S-> S  : формирует torrent файл
R1->S  : подключается к Отправителю\nиспользуя magnet ссылку\nи запрашивает составные части
S ->R2 : передает запрос известным узлам (Получатель 2)
R2-->S : сообщает об отсутствии составных частей
S -> R1: передаёт составные части
R1->R1 : становится источником

R2->S  : подключается к Отправителю\nиспользуя magnet ссылку\nи запрашивает составные части
S ->R1 : передает запрос известным узлам (Получатель)
R1-->S : сообщает о наличии составных частей
S-> R2 : сообщает об узле источнике (Получатель)
R2->R1 : подключается к Получателю\nи запрашивает составные части
S-->R2 : передаёт составные части
R1-->R2: передаёт составные части
R2->R2 : становится источником

@enduml